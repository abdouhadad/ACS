<?xml version = '1.0' encoding = 'UTF-8'?>
<TriggerOraclev10g class="oracle.dbtools.crest.model.design.storage.oracle.v10g.TriggerOraclev10g" name="AUTO_RECIEVED" directorySegmentName="seg_0" id="C6AC73E2-ABAF-1036-BAAE-55C60DAEAF0D">
<sourceConnName>osd11g</sourceConnName>
<sourceObjSchema>OSD</sourceObjSchema>
<sourceObjName>AUTO_RECIEVED</sourceObjName>
<createdBy>Administrator</createdBy>
<createdTime>2014-12-02 09:16:55 UTC</createdTime>
<ownerDesignName>ACS1.1</ownerDesignName>
<actions>INSERT, UPDATE, DELETE</actions>
<body>DECLARE&lt;br/&gt;    tmpVar      NUMBER;&lt;br/&gt;    v_location  number;&lt;br/&gt;&lt;br/&gt;BEGIN&lt;br/&gt;&lt;br/&gt;IF DBMS_REPUTIL.FROM_REMOTE = FALSE THEN&lt;br/&gt;   &lt;br/&gt;    if  inserting then &lt;br/&gt;        &lt;br/&gt;        select location into v_location&lt;br/&gt;        from main.departments&lt;br/&gt;        where department_no = :new.DEPT_CODE;&lt;br/&gt;        &lt;br/&gt;        ------------------  ??????? ??????? = ??????? ??????? ????? -------------- &lt;br/&gt;        if :new.dept_code = :new.department_no then&lt;br/&gt;            INSERT INTO &quot;OSD&quot;.&quot;AUTO_RECIEVED&quot;&lt;br/&gt;            (PROCESS_NO, year, serial_no, from_dept,   to_dept,  &lt;br/&gt;             sent_date,  &lt;br/&gt;             rec_date, &lt;br/&gt;             sent_user,  attachment         ,REC_FLAG, rec_done_date, rec_user)&lt;br/&gt;           VALUES&lt;br/&gt;            (:NEW.PROCESS_NO, :new.year,  0, :NEW.DEPARTMENT_NO, :NEW.DEPT_CODE,   &lt;br/&gt;             TO_CHAR(:new.IN_DATE_YY) ||&apos;/&apos;|| LPAD(:new.IN_DATE_MM,2,&apos;0&apos;) ||&apos;/&apos;||LPAD(:new.IN_DATE_DD,2,&apos;0&apos;) ,&lt;br/&gt;             TO_CHAR(:new.IN_DATE_YY) ||&apos;/&apos;|| LPAD(:new.IN_DATE_MM,2,&apos;0&apos;) ||&apos;/&apos;||LPAD(:new.IN_DATE_DD,2,&apos;0&apos;) ,&lt;br/&gt;             :NEW.USER_ID,:NEW.IN_ACCOMPANIED, 1,       sysdate,       :new.user_id );        &lt;br/&gt;        &lt;br/&gt;            ------------------------- ????????? ??????? ??????? -----------------&lt;br/&gt;        elsif v_location not in (1, 5) or :new.dept_code in (&apos;2010300000&apos;,&apos;2010302400&apos;,&apos;2010302000&apos;) then&lt;br/&gt;           INSERT INTO &quot;OSD&quot;.&quot;AUTO_RECIEVED&quot;&lt;br/&gt;            (PROCESS_NO,  year,     serial_no, from_dept, to_dept,  &lt;br/&gt;             sent_date,  &lt;br/&gt;             rec_date, &lt;br/&gt;             sent_user,  attachment, REC_FLAG, rec_done_date, rec_user)&lt;br/&gt;           VALUES&lt;br/&gt;            (:NEW.PROCESS_NO, :new.year, 0 ,  :NEW.DEPARTMENT_NO,  :NEW.dept_code,&lt;br/&gt;             TO_CHAR(:new.IN_DATE_YY) ||&apos;/&apos;|| LPAD(:new.IN_DATE_MM,2,&apos;0&apos;) ||&apos;/&apos;||LPAD(:new.IN_DATE_DD,2,&apos;0&apos;),&lt;br/&gt;             TO_CHAR(:new.IN_DATE_YY) ||&apos;/&apos;|| LPAD(:new.IN_DATE_MM,2,&apos;0&apos;) ||&apos;/&apos;||LPAD(:new.IN_DATE_DD,2,&apos;0&apos;),&lt;br/&gt;             :NEW.USER_ID, :NEW.IN_ACCOMPANIED, 1, sysdate, 10000 );&lt;br/&gt;        &lt;br/&gt;        --------------------- ????? ??????? -------------------------------------&lt;br/&gt;        else&lt;br/&gt;            INSERT INTO &quot;OSD&quot;.&quot;AUTO_RECIEVED&quot;&lt;br/&gt;            (PROCESS_NO, year, serial_no, from_dept, to_dept,  &lt;br/&gt;             sent_date, sent_user ,attachment, REC_FLAG)&lt;br/&gt;           VALUES&lt;br/&gt;            (:NEW.PROCESS_NO, :new.year, 0,   :NEW.DEPARTMENT_NO, :NEW.DEPT_CODE,&lt;br/&gt;             TO_CHAR(:new.IN_DATE_YY) ||&apos;/&apos;|| LPAD(:new.IN_DATE_MM,2,&apos;0&apos;) ||&apos;/&apos;||LPAD(:new.IN_DATE_DD,2,&apos;0&apos;) ,&lt;br/&gt;             :NEW.USER_ID,:NEW.IN_ACCOMPANIED,0 );&lt;br/&gt;        end if;&lt;br/&gt;      &lt;br/&gt;            &lt;br/&gt;    elsif updating  then &lt;br/&gt;    &lt;br/&gt;        update &quot;OSD&quot;.&quot;AUTO_RECIEVED&quot;&lt;br/&gt;        SET PROCESS_NO = :NEW.PROCESS_NO, year = :new.year  , from_dept = :NEW.DEPARTMENT_NO, to_dept = :NEW.DEPT_CODE , &lt;br/&gt;            sent_date = TO_CHAR(:new.IN_DATE_YY) ||&apos;/&apos;|| LPAD(:new.IN_DATE_MM,2,&apos;0&apos;) ||&apos;/&apos;||LPAD(:new.IN_DATE_DD,2,&apos;0&apos;) ,&lt;br/&gt;            attachment = :NEW.IN_ACCOMPANIED&lt;br/&gt;        WHERE PROCESS_NO=:OLD.PROCESS_NO&lt;br/&gt;        and serial_no = 0 ;&lt;br/&gt;    &lt;br/&gt;    elsif  deleting  then &lt;br/&gt;        &lt;br/&gt;        delete &quot;OSD&quot;.&quot;AUTO_RECIEVED&quot;&lt;br/&gt;        where process_no =:old.process_no;      &lt;br/&gt;&lt;br/&gt;      end if;       &lt;br/&gt;  &lt;br/&gt;  &lt;br/&gt;END IF;&lt;br/&gt;&lt;br/&gt;END ; </body>
<triggerTime>AFTER</triggerTime>
<owner>C5730B64-FB4D-9F2E-CCB9-0672373953FB</owner>
<table>64DBC6E5-097C-8856-2E67-AE2B79EC45B6</table>
</TriggerOraclev10g>