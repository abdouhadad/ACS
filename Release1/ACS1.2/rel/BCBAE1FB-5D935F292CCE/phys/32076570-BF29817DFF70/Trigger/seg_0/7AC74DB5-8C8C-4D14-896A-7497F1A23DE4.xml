<?xml version = '1.0' encoding = 'UTF-8'?>
<TriggerOraclev10g class="oracle.dbtools.crest.model.design.storage.oracle.v10g.TriggerOraclev10g" name="PROS_STAT_CM" directorySegmentName="seg_0" id="7AC74DB5-8C8C-4D14-896A-7497F1A23DE4">
<sourceConnName>osd11g</sourceConnName>
<sourceObjSchema>OSD</sourceObjSchema>
<sourceObjName>PROS_STAT_CM</sourceObjName>
<createdBy>Administrator</createdBy>
<createdTime>2014-12-02 09:16:55 UTC</createdTime>
<ownerDesignName>ACS1.2</ownerDesignName>
<actions>INSERT, UPDATE, DELETE</actions>
<body>DECLARE&lt;br/&gt;&lt;br/&gt;/*???? ?????? ?????? ???????? ?? ???? osd.process_status  ??? ???? ????? ?????? ?????? ???? ???????? ?? ???? osd.process_status*/&lt;br/&gt;&lt;br/&gt;    v_count number;&lt;br/&gt;    v_location number;&lt;br/&gt;    &lt;br/&gt;BEGIN&lt;br/&gt;&lt;br/&gt;    IF DBMS_REPUTIL.FROM_REMOTE  = FALSE THEN&lt;br/&gt;    &lt;br/&gt;        select location into v_location  -- to insert department location &lt;br/&gt;        from main.departments&lt;br/&gt;        where department_no = :new.department_no;&lt;br/&gt;        &lt;br/&gt;          if inserting then&lt;br/&gt;          &lt;br/&gt;            insert /*+ append */  into osd.process_status &lt;br/&gt;            ( &lt;br/&gt;              PROCESS_NO,&lt;br/&gt;              YEAR ,&lt;br/&gt;              ACTION_CODE,&lt;br/&gt;              IN_DATE,&lt;br/&gt;              DEPARTMENT_NO, DEPT_CODE,&lt;br/&gt;              SENT_USER,&lt;br/&gt;              TIME_FLAG,&lt;br/&gt;              LOG_COUNT,&lt;br/&gt;              LOCATION,&lt;br/&gt;              CURRENT_DEPT,&lt;br/&gt;              DISPLAY,&lt;br/&gt;              CREATE_DATE )&lt;br/&gt;                            &lt;br/&gt;            values&lt;br/&gt;            (:new.process_no, &lt;br/&gt;             :new.year, &lt;br/&gt;             :new.action_code, &lt;br/&gt;             :new.in_date_yy||&apos;/&apos;||LPAD (TO_CHAR(:new.in_date_mm),2,&apos;0&apos;)||&apos;/&apos;||LPAD(TO_CHAR(:new.in_date_dd),2,&apos;0&apos;),&lt;br/&gt;             :new.department_no, :new.dept_code,&lt;br/&gt;             :new.user_id,&lt;br/&gt;              sysdate, &lt;br/&gt;              0, -- log_count &lt;br/&gt;              v_location,&lt;br/&gt;              :new.department_no,&lt;br/&gt;              1,&lt;br/&gt;              sysdate );&lt;br/&gt;              &lt;br/&gt;          elsif updating then&lt;br/&gt;&lt;br/&gt;                update osd.process_status set&lt;br/&gt;                    process_no = :new.process_no,&lt;br/&gt;                    year = :new.year,&lt;br/&gt;                    action_code = :new.action_code,&lt;br/&gt;                    in_date = :new.in_date_yy||&apos;/&apos;||LPAD (TO_CHAR(:new.in_date_mm),2,&apos;0&apos;)||&apos;/&apos;||LPAD(TO_CHAR (:new.in_date_dd),2,&apos;0&apos;),&lt;br/&gt;                    dept_code = :new.dept_code,&lt;br/&gt;                    sent_user = :new.user_id,&lt;br/&gt;                    time_flag = sysdate&lt;br/&gt;                where process_no = :old.process_no&lt;br/&gt;                and log_count = 0 ;&lt;br/&gt;          &lt;br/&gt;          end if; &lt;br/&gt;            &lt;br/&gt;    end if;   &lt;br/&gt;    &lt;br/&gt;exception&lt;br/&gt;    when no_data_found then null;&lt;br/&gt;END; </body>
<triggerTime>AFTER</triggerTime>
<owner>C5730B64-FB4D-9F2E-CCB9-0672373953FB</owner>
<table>64DBC6E5-097C-8856-2E67-AE2B79EC45B6</table>
</TriggerOraclev10g>